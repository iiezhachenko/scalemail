#!/usr/bin/env ruby

# It shouldn't be here, but SimpleCov doesn't work with Aruba otherwise
if ENV['COVERAGE']
  require 'simplecov'
  puts SimpleCov.root
  SimpleCov.start do
    root(File.join(File.expand_path(File.dirname(__FILE__)), '..'))
    track_files 'bin/scalemail'
    command_name ARGV.join ' '
  end
end

require 'gli'
require_relative '../lib/scalemail'

include GLI::App

program_desc 'Application scaling toolkit'
version Scalemail::VERSION

subcommand_option_handling :normal
synopsis_format :compact

desc 'YAML file with Docker Machine hosts description'
arg_name 'FILE'
flag [:m, 'docker-machine-config'], type: String,
                                    default_value: './docker-machine-config.yml'

desc 'Print Docker Machine commands to be executed'
command :plan do |c|
  c.action do |global_options, option, args|

  end
end

exit run(ARGV)
